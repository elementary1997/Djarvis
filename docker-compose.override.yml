version: '3.8'

services:
  web:
    command: sh -c "
      echo 'ðŸ”„ Creating migrations...' &&
      python manage.py makemigrations accounts &&
      python manage.py makemigrations courses &&
      python manage.py makemigrations exercises &&
      python manage.py makemigrations sandbox &&
      python manage.py makemigrations progress &&
      echo 'âœ… Migrations created' &&
      echo 'ðŸ”„ Applying migrations...' &&
      python manage.py migrate &&
      echo 'âœ… Migrations applied' &&
      echo 'ðŸ“š Collecting static files...' &&
      python manage.py collectstatic --noinput &&
      echo 'âœ… Static files collected' &&
      echo 'ðŸš€ Starting Gunicorn...' &&
      gunicorn config.wsgi:application --bind 0.0.0.0:8000 --workers 4 --timeout 120
      "
